{"ast":null,"code":"import { getUrls } from 'src/app/state/url/url.selector';\nimport { deleteUrl, loadUrls } from 'src/app/state/url/url.actions';\nimport { UrlInfoComponent } from '../url-info/url-info.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nfunction AllUrlsComponent_table_2_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function AllUrlsComponent_table_2_tr_12_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const url_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.urlInfo(url_r2));\n    });\n    i0.ɵɵtext(9, \"Info\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function AllUrlsComponent_table_2_tr_12_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const url_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.delete(url_r2));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const url_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(url_r2.originalUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(url_r2.shortUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(url_r2.createdAt);\n  }\n}\n\nfunction AllUrlsComponent_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 1)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"URL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Shorted URL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Created date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Action\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"tbody\");\n    i0.ɵɵtemplate(12, AllUrlsComponent_table_2_tr_12_Template, 12, 3, \"tr\", 2);\n    i0.ɵɵpipe(13, \"async\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(13, 1, ctx_r0.urls));\n  }\n}\n\nexport class AllUrlsComponent {\n  constructor(store, router) {\n    this.store = store;\n    this.router = router;\n  }\n\n  ngOnInit() {\n    this.urls = this.store.select(getUrls);\n    this.store.dispatch(loadUrls());\n  }\n\n  delete(url) {\n    const id = url.id;\n    this.store.dispatch(deleteUrl({\n      id\n    }));\n  }\n\n  urlInfo(url) {\n    const navExtras = {\n      state: url\n    };\n    this.router.navigateByUrl('/url-info', navExtras);\n  }\n\n}\n\nAllUrlsComponent.ɵfac = function AllUrlsComponent_Factory(t) {\n  return new (t || AllUrlsComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nAllUrlsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AllUrlsComponent,\n  selectors: [[\"app-all-urls\"]],\n  viewQuery: function AllUrlsComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(UrlInfoComponent, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.child = _t.first);\n    }\n  },\n  decls: 3,\n  vars: 1,\n  consts: [[\"class\", \"table table-striped\", \"aria-labelledby\", \"tableLabel\", 4, \"ngIf\"], [\"aria-labelledby\", \"tableLabel\", 1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [\"type\", \"button\", 3, \"click\"]],\n  template: function AllUrlsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"All URLs\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, AllUrlsComponent_table_2_Template, 14, 3, \"table\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.urls);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i3.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AAMA,SAASA,OAAT,QAAwB,gCAAxB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,+BAApC;AACA,SAASC,gBAAT,QAAiC,gCAAjC;;;;;;;;;;ICIIC,2BAAqC,CAArC,EAAqC,IAArC;IACMA;IAAqBA;IACzBA;IAAIA;IAAkBA;IACtBA;IAAIA;IAAmBA;IACvBA,2BAAI,CAAJ,EAAI,QAAJ,EAAI,CAAJ;IACUA;MAAA;MAAA;MAAA;MAAA,OAASA,sCAAT;IAAqB,CAArB;IAAuBA;IAAIA;IAClCA;IAAsBA;MAAA;MAAA;MAAA;MAAA,OAASA,qCAAT;IAAoB,CAApB;IAAsBA;IAAMA;;;;;IALjDA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;;;;;;IAbVA,iCAA6E,CAA7E,EAA6E,OAA7E,EAA6E,CAA7E,EAA6E,IAA7E,EAA6E,CAA7E,EAA6E,IAA7E;IAGUA;IAAGA;IACPA;IAAIA;IAAWA;IACfA;IAAIA;IAAYA;IAChBA;IAAIA;IAAMA;IAGdA;IACEA;;IASFA;;;;;IATsBA;IAAAA;;;;ADGxB,OAAM,MAAOC,gBAAP,CAAuB;EAK3BC,YAAoBC,KAApB,EAAoDC,MAApD,EAAkE;IAA9C;IAAgC;EAAkB;;EAEtEC,QAAQ;IACN,KAAKC,IAAL,GAAY,KAAKH,KAAL,CAAWI,MAAX,CAAkBX,OAAlB,CAAZ;IACA,KAAKO,KAAL,CAAWK,QAAX,CAAoBV,QAAQ,EAA5B;EACD;;EAEDW,MAAM,CAACC,GAAD,EAAS;IACb,MAAMC,EAAE,GAAWD,GAAG,CAACC,EAAvB;IACA,KAAKR,KAAL,CAAWK,QAAX,CAAoBX,SAAS,CAAC;MAAEc;IAAF,CAAD,CAA7B;EACD;;EAEDC,OAAO,CAACF,GAAD,EAAS;IACd,MAAMG,SAAS,GAAqB;MAClCC,KAAK,EAAEJ;IAD2B,CAApC;IAIA,KAAKN,MAAL,CAAYW,aAAZ,CAA0B,WAA1B,EAAuCF,SAAvC;EAGD;;AAzB0B;;;mBAAhBZ,kBAAgBD;AAAA;;;QAAhBC;EAAgBe;EAAAC;IAAA;qBAGhBlB,kBAAgB;;;;;;;;;;;;;;MClB7BC;MAAIA;MAAQA;MAEZA;;;;MAAiEA;MAAAA","names":["getUrls","deleteUrl","loadUrls","UrlInfoComponent","i0","AllUrlsComponent","constructor","store","router","ngOnInit","urls","select","dispatch","delete","url","id","urlInfo","navExtras","state","navigateByUrl","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\pasha\\source\\repos\\InforceTask\\InforceTask\\ClientApp\\src\\app\\pages\\all-urls\\all-urls.component.ts","C:\\Users\\pasha\\source\\repos\\InforceTask\\InforceTask\\ClientApp\\src\\app\\pages\\all-urls\\all-urls.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild, AfterViewInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Url } from '../../global/models/url';\r\nimport { Observable } from 'rxjs';\r\nimport { Store } from '@ngrx/store';\r\nimport { AppState } from 'src/app/state/app.state';\r\nimport { getUrls } from 'src/app/state/url/url.selector';\r\nimport { deleteUrl, loadUrls } from 'src/app/state/url/url.actions';\r\nimport { UrlInfoComponent } from '../url-info/url-info.component';\r\nimport { NavigationExtras, Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-all-urls',\r\n  templateUrl: './all-urls.component.html',\r\n})\r\nexport class AllUrlsComponent implements OnInit {\r\n  urls?: Observable<Url[]>;\r\n\r\n  @ViewChild(UrlInfoComponent) child: any;\r\n\r\n  constructor(private store: Store<AppState>, private router: Router) {}\r\n\r\n  ngOnInit(): void {\r\n    this.urls = this.store.select(getUrls);\r\n    this.store.dispatch(loadUrls());\r\n  }\r\n\r\n  delete(url: Url) {\r\n    const id: number = url.id;\r\n    this.store.dispatch(deleteUrl({ id }));\r\n  }\r\n\r\n  urlInfo(url: Url) {\r\n    const navExtras: NavigationExtras = {\r\n      state: url\r\n    }\r\n\r\n    this.router.navigateByUrl('/url-info', navExtras)\r\n)\r\n\r\n  }\r\n}\r\n","<h1>All URLs</h1>\r\n\r\n<table class=\"table table-striped\" aria-labelledby=\"tableLabel\" *ngIf=\"urls\">\r\n  <thead>\r\n    <tr>\r\n      <th>URL</th>\r\n      <th>Shorted URL</th>\r\n      <th>Created date</th>\r\n      <th>Action</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let url of urls | async\">\r\n      <td>{{ url.originalUrl }}</td>\r\n      <td>{{ url.shortUrl }}</td>\r\n      <td>{{ url.createdAt }}</td>\r\n      <td>\r\n        <button (click)=\"urlInfo(url)\">Info</button\r\n        ><button type=\"button\" (click)=\"delete(url)\">Delete</button>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n"]},"metadata":{},"sourceType":"module"}